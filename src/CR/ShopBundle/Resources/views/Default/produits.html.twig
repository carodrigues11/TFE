{% extends 'base.html.twig' %}

{% block body %}
<html>
    <body class="bodyProduit">

        <h1 class="titreProduit">Produits</h1>

        {% block produits %}

            {% for produit in produits %}

                <!-- Produit -->
                <div class="produitAll col-md-4" style="display: inline-block; vertical-align: top;  width: 32%; padding: 0;">
                    <!-- image qui ouvre une modal  -->
                    <div class="imgProduit" data-toggle="modal" data-target="#modalProduit{{ produit.id }}" style=" height: 250px; overflow: hidden;">
                        <a href="#"><img  style="width: 90%; overflow: hidden; background-color: #0c5460; text-align: center;" src="{{app.request.basepath}}/directory/img/{{produit.image}}" alt="{{ produit.nom }}" /></a>

                    </div> <!-- Image modal - end -->

                    <div class="contentProduit">
                        <div class="nomProduit">{{ produit.nom }}</div>
                        <div class="prixProduit">{{ produit.prix }} €/Kg</div>
                        {% if panier[produit.id] is not defined %}

                        <div class="quantitéProduit">
                            <form action="{{ path('ajouter',{'id':produit.id})}}" method="get">
                                <select class="quantite" name="quantite">
                                {% for i in 1..10 %}
                                    <option value="{{ i }}">{{ i }}</option>
                                {% endfor %}
                                </select>
                                <div class="btnProduit">
                                    <button  class="btn-primary editBtn">Ajouter au panier</button>
                                </div>
                            </form>
                        </div>

                        {% else %}
                        <form action="{{ path('ajouter', { 'id' : produit.id}) }}" method="get">
                            <div class="quantite">Modifier les quantités:</div>
                            <div>
                                <select class="quantite" name="quantite" onchange="this.form.submit()">
                                    {% for i in 1..10 %}
                                        <option value="{{ i }}" {% if i == panier[produit.id] %} selected="selected" {% endif %}>{{ i }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                        </form>
                        {% endif %}
                                </div>
                            </form>
                        </div>



                    </div>


                </div>
            {% endfor %}

        {% endblock %}

    </body>
</html>

{% endblock %}