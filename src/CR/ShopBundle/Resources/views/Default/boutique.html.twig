{% extends 'base.html.twig' %}

{% block body %}
<html>
    <body>

    <div id="map" style="width:100%;height:400px;"></div>


    {# Informations sur la boutique à l'id = $id  #}
    {% for boutique in boutiques %}
        {% if boutique.id == id %}
        <div class="infoBoutique">
            <div class="col-1-boutique">
                <div class="imgBoutique"><a href="#"><img class="imgBoutique" style=" overflow: hidden; background-color: #0c5460; text-align: center;" src="{{app.request.basepath}}/directory/img/{{boutique.image}}" alt="{{ boutique.nom }}" /></a></div>
            </div>
            <div class="col-2-boutique">
                <h1 class="nomBoutique"> {{ boutique.nom }}</h1>
                <div class="distanceBoutique">{{ boutique.adresseBoutique }} - Distance KM</div>
                <div class="descriptionBoutique">{{ boutique.description }} </div>
            </div>
        </div>


        <script>
            var street = 'Charleroi';
            function initMap() {
                var map = new google.maps.Map(document.getElementById('map'), {zoom: 15});
                var geocoder = new google.maps.Geocoder;
                geocoder.geocode({'address': street}, function(results, status) {
                    if (status === 'OK') {
                        map.setCenter(results[0].geometry.location);
                        new google.maps.Marker({
                            map: map,
                            position: results[0].geometry.location
                        });
                    } else {
                        window.alert('Geocode was not successful for the following reason: ' +
                            status);
                    }
                });
            }
        </script>



        {% endif %}

    {% endfor %}




    {# Tous les produits de la boutique à l'id = $id  #}

    <h3 class="produitBoutique">Nos produits</h3>
    {% for produit in produits %}
        {% if produit.boutiqueId == id %}

            <!-- Produit -->
            <div class="produitAll col-md-4" style="display: inline-block; vertical-align: top;  width: 32%; padding: 0;">
                <!-- image qui ouvre une modal  -->
                <div class="imgProduit" data-toggle="modal" data-target="#modalProduit{{ produit.id }}" style=" height: 250px; overflow: hidden;">
                    <a href="#"><img  style="width: 90%; overflow: hidden; background-color: #0c5460; text-align: center;" src="{{app.request.basepath}}/directory/img/{{produit.image}}" alt="{{ produit.nom }}" /></a>

                </div> <!-- Image modal - end -->

                <div class="contentProduit">
                    <div class="nomProduit">{{ produit.nom }}</div>
                    <div class="prixProduit">{{ produit.prix }} €/Kg</div>
                    {% if panier[produit.id] is not defined %}

                        <div class="quantitéProduit">
                            <form action="{{ path('ajouter',{'id':produit.id})}}" method="get">
                                <select class="quantite" name="quantite">
                                    {% for i in 1..10 %}
                                        <option value="{{ i }}">{{ i }}</option>
                                    {% endfor %}
                                </select>
                                <div class="btnProduit">
                                    <button  class="btn-primary editBtn">Ajouter au panier</button>
                                </div>
                            </form>
                        </div>

                    {% else %}
                        <form action="{{ path('ajouter', { 'id' : produit.id}) }}" method="get">
                            <div class="quantite">Modifier les quantités:</div>
                            <div>
                                <select class="quantite" name="quantite" onchange="this.form.submit()">
                                    {% for i in 1..10 %}
                                        <option value="{{ i }}" {% if i == panier[produit.id] %} selected="selected" {% endif %}>{{ i }}</option>
                                    {% endfor %}
                                </select>
                            </div>

                        </form>
                    {% endif %}
                </div>
                </form>
            </div>



        {% endif %}
    {% endfor %}

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyC2eQqOq9LagnwlJFYKCFbpfbKEtZugOBs&callback=initMap"></script>



    </body>
</html>

{% endblock %}